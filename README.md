# Проект поиска рецептов: Flask-приложение и API

## Описание проекта
Данный проект представляет собой комплексное решение для поиска рецептов с использованием различных методов поиска. Система включает в себя веб-интерфейс на Flask и API-сервис, реализованный с помощью FastAPI. В основе проекта лежит MySQL база данных, содержащая коллекцию рецептов.

## Функциональные возможности
Наш проект предоставляет следующие ключевые возможности:

### Веб-интерфейс (Flask):
- Регистрация и аутентификация пользователей
- Просмотр рецептов с возможностью сортировки
- Система оценки рецептов (лайки/дизлайки)
- Возможность добавления рецептов в закладки
- Профили пользователей с историей взаимодействий
- Рейтинг пользователей на основе их активности

### API (FastAPI):
- Три метода поиска рецептов:
  - Простой текстовый поиск
  - BM25 (статистический поиск)
  - Семантический поиск на основе эмбеддингов
- Информация о корпусе рецептов
- Возможность получения релевантности результатов поиска

## Установка и запуск

### Предварительные требования
- Docker и Docker Compose
- Git (для клонирования репозитория)

### Шаги по установке

1. Клонируйте репозиторий:
git clone [URL репозитория]
cd recipe_project

2. Запустите проект через Docker Compose:
docker-compose up --build

После успешного запуска вам будут доступны:
- Веб-интерфейс: http://localhost:5000
- API: http://localhost:8000
- Swagger документация API: http://localhost:8000/docs

### Использование предварительно собранных образов
Вы можете использовать готовые Docker-образы из Docker Hub:

version: '3.9'
services:
  db:
    image: mysql:8.0
    environment:
      MYSQL_DATABASE: recipes_db
      MYSQL_USER: app_user
      MYSQL_PASSWORD: app_password
      MYSQL_ROOT_PASSWORD: root_password
    ports:
      - "3306:3306"
    volumes:
      - db_data:/var/lib/mysql

  web:
    image: yourusername/recipe-web:latest
    ports:
      - "5000:5000"
    depends_on:
      - db

  api:
    image: yourusername/recipe-api:latest
    ports:
      - "8000:8000"
    depends_on:
      - db

volumes:
  db_data:

## Использование API

### Доступные эндпоинты

1. Получение списка методов поиска:
GET http://localhost:8000/methods

2. Получение информации о корпусе рецептов:
GET http://localhost:8000/corpus-info

3. Поиск рецептов:
GET http://localhost:8000/search?query=суп&method=bm25&limit=10&include_scores=true

Параметры поиска:
- query: поисковый запрос
- method: метод поиска (simple, bm25, embedding)
- limit: максимальное количество результатов (1-100)
- include_scores: включать ли оценки релевантности (true/false)

## Структура проекта
recipe_project/
├── app/
│   ├── templates - HTML-шаблоны
│   ├── __init__.py - логика создания приложения
│   ├── api.py - АПИ
│   ├── config.py - Информация про параметры и подключение к БД
│   ├── models.py - модели данных
│   ├── routes.py - руты фласка
│   ├── schemas.py - схемы Pydantic для АПИ
│   └── search_preprocessing.py - предобработка текста
├── db/
│   ├── init.sql - запуск БД
│   └── recipes.csv - исходник данных с рецептами
├── api/
│   └── Dockerfile
├── web/
│   └── Dockerfile
├── app.py - запуск всего процесса
├── docker-compose.yml
└── requirements.txt

## Работа с базой данных
База данных автоматически инициализируется при первом запуске через Docker Compose. Начальные данные загружаются из файла recipes.csv, расположенного в директории db/.

## Особенности реализации поиска
- Простой поиск использует SQL LIKE для поиска по названию, типу, кухне и тексту рецепта
- BM25 использует предварительно созданный индекс Whoosh для эффективного поиска
- Эмбеддинг-поиск использует модель sentence-transformers для создания векторных представлений текста
